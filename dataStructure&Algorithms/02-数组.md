# 数据结构和算法笔记 02-数组

数组（Array）是一种**线性表**数据结构。它用**一组连续的内存空间**，来存储**一组具有相同类型的数据**。

## 数组的特点

支持随机访问，根据下标随机访问的时间复杂度为 O(1)

根据下标随机访问数组元素的实现方式：

```
<!-- base_address为内存块的首地址 -->
<!-- data_type_size 表示数组中每个元素的大小 -->

a[i]_address = base_address + i * data_type_size
```

## 数组的缺点

为了**保持内存数据的连续性**，会导致“插入”和“删除”操作很低效

1. 插入操作

   如果将数据插入数组末尾，则最好情况时间复杂度为 O(1)；如果将数据插入数组开头，则最坏情况时间复杂度为 O(n)；平均情况时间复杂度也为 O(n)。

   特殊情况：如果数组中的数据不是有序的，可以直接将第 k 位的数据搬移到数组元素的最后，把新的元素直接放入第 k 个位置，这样时间复杂度就将为 O（1）了。

2. 删除操作

   如果删除数组末尾的数据，则最好情况时间复杂度为 O(1)；如果删除开头的数据，则最坏情况时间复杂度为 O(n)；平均情况时间复杂度也为 O(n)。

   优化策略：先记录下已经删除的数据。每次的删除操作并不真正地搬移数据，只是记录数据已经被删除。当数组没有更多空间存储数据时，再触发执行真正的删除操作，减少删除操作导致的数据搬移。

## 数组的访问越界问题

在 C 语言中，只要不是访问受限的内存，所有的内存空间都是可以自由访问

```
<!-- 如果用来编译这段程序的编译器按照内存地址递减的方式给变量分配内存，那么内存中的i将会被置为0（a[3]=0 就相当于 i=0），会造成死循环 -->

int main(int argc, char* argv[]){
    int i = 0;
    int arr[3] = {0};
    for(; i<=3; i++){
        arr[i] = 0;
        printf("hello world\n");
    }
    return 0;
}
```

## 容器（ArrayList）

1. 优点：
   - 对很多数组操作细节进行封装
   - 支持动态扩容
2. 缺点：
   - 无法存储基本类型，需要进行封装
   - 扩容操作涉及内存申请和数据搬移，比较耗时
